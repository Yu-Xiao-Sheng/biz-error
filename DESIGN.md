# biz-error è®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [1. çœŸå®éœ€æ±‚](#1-çœŸå®éœ€æ±‚)
- [2. æ ¸å¿ƒé—®é¢˜](#2-æ ¸å¿ƒé—®é¢˜)
- [3. è§£å†³æ–¹æ¡ˆ](#3-è§£å†³æ–¹æ¡ˆ)
- [4. æ¶æ„è®¾è®¡](#4-æ¶æ„è®¾è®¡)
- [5. æŠ€æœ¯å®ç°](#5-æŠ€æœ¯å®ç°)
- [6. ä½¿ç”¨åœºæ™¯](#6-ä½¿ç”¨åœºæ™¯)

---

## 1. çœŸå®éœ€æ±‚

### 1.1 ä¸šåŠ¡èƒŒæ™¯

åœ¨ Rust ä¸šåŠ¡ç³»ç»Ÿå¼€å‘ä¸­ï¼Œå¼€å‘è€…ç»å¸¸é‡åˆ°ä»¥ä¸‹ç—›ç‚¹ï¼š

1. **é”™è¯¯ç ç®¡ç†æ··ä¹±**
   - ä»£ç ä¸­åˆ°å¤„æ•£è½ç€ç¡¬ç¼–ç çš„é”™è¯¯ç æ•°å­—ï¼ˆå¦‚ `4000`, `5000`ï¼‰
   - æ²¡æœ‰ç»Ÿä¸€çš„é”™è¯¯ç ç®¡ç†è§„èŒƒ
   - ä¿®æ”¹é”™è¯¯ç éœ€è¦åœ¨å¤šå¤„ä»£ç ä¸­æŸ¥æ‰¾æ›¿æ¢

2. **ç¼ºå°‘å›½é™…åŒ–æ”¯æŒ**
   - é”™è¯¯æ¶ˆæ¯ç¡¬ç¼–ç åœ¨ Rust ä»£ç ä¸­
   - å¤šè¯­è¨€æ”¯æŒå›°éš¾ï¼Œéœ€è¦ç»´æŠ¤å¤§é‡å­—ç¬¦ä¸²æ˜ å°„
   - æ·»åŠ æ–°è¯­è¨€éœ€è¦ä¿®æ”¹ä»£ç é€»è¾‘

3. **é”™è¯¯ä¿¡æ¯ä¸å®Œæ•´**
   - åªæœ‰ç®€å•çš„é”™è¯¯æ¶ˆæ¯ï¼Œç¼ºå°‘è¯¦ç»†çš„ä¸Šä¸‹æ–‡æ•°æ®
   - å‰ç«¯æ— æ³•æ ¹æ®é”™è¯¯ç ç²¾ç¡®å¤„ç†ä¸åŒåœºæ™¯
   - éš¾ä»¥è¿½è¸ªé”™è¯¯çš„å®Œæ•´ä¿¡æ¯

4. **ç¼ºå°‘é”™è¯¯ç±»å‹å±‚æ¬¡**
   - éš¾ä»¥å®šä¹‰ç‰¹å®šé¢†åŸŸçš„ä¸šåŠ¡é”™è¯¯ç±»å‹
   - æ— æ³•ä¸ºä¸åŒä¸šåŠ¡æ¨¡å—ï¼ˆç”¨æˆ·ã€è®¢å•ã€æ”¯ä»˜ï¼‰å®šä¹‰ä¸“é—¨çš„é”™è¯¯ç±»å‹
   - ä»£ç å¤ç”¨æ€§å·®ï¼Œé”™è¯¯å¤„ç†é€»è¾‘é‡å¤

5. **å¼€å‘ä½“éªŒä¸ä½³**
   - æ²¡æœ‰ç±»å‹å®‰å…¨ï¼Œå®¹æ˜“æ‹¼å†™é”™è¯¯
   - IDE æ— æ³•è‡ªåŠ¨è¡¥å…¨é”™è¯¯ç 
   - æ— æ³•å¿«é€ŸæŸ¥çœ‹é”™è¯¯ç çš„å«ä¹‰

### 1.2 ç†æƒ³ç›®æ ‡

å¼€å‘è€…å¸Œæœ›è¾¾åˆ°ç†æƒ³çš„é”™è¯¯å¤„ç†ä½“éªŒï¼š

```text
æœŸæœ›çš„ç‰¹æ€§ï¼š
âœ“ ç±»å‹å®‰å…¨çš„é”™è¯¯ç å®šä¹‰
âœ“ é›†ä¸­åŒ–çš„é”™è¯¯ç ç®¡ç†
âœ“ çµæ´»çš„è‡ªå®šä¹‰é”™è¯¯ç±»å‹
âœ“ ä¸°å¯Œçš„é”™è¯¯ä¸Šä¸‹æ–‡ä¿¡æ¯
âœ“ ç®€æ´æ˜“ç”¨çš„ API
âœ“ è‰¯å¥½çš„ IDE æ”¯æŒ
```

**åœ¨ Rust ä¸­å®ç°è¿™äº›ç‰¹æ€§ï¼**

---

## 2. æ ¸å¿ƒé—®é¢˜

### 2.1 Rust ä¸­çš„æŒ‘æˆ˜

| æŒ‘æˆ˜ | è¯´æ˜ |
|------|------|
| æšä¸¾å­—æ®µç®¡ç† | æšä¸¾å…³è”ç±»å‹å¯ä»¥æºå¸¦å­—æ®µï¼Œä½†ä¸ç›´è§‚ï¼Œéš¾ä»¥åŒæ—¶å®šä¹‰ code å’Œ msg |
| ç»§æ‰¿æœºåˆ¶ | Rust æ— ç»§æ‰¿æœºåˆ¶ï¼Œéš¾ä»¥åˆ›å»ºä¼ ç»Ÿæ„ä¹‰ä¸Šçš„å¼‚å¸¸å±‚æ¬¡ |
| è¿è¡Œæ—¶åå°„ | Rust ç¼–è¯‘æ—¶ç¡®å®šï¼ŒåŠ¨æ€åŠ è½½æ¶ˆæ¯å›°éš¾ |
| å®çš„å­¦ä¹ æˆæœ¬ | è¿‡ç¨‹å®åŠŸèƒ½å¼ºå¤§ï¼Œä½†å­¦ä¹ æˆæœ¬è¾ƒé«˜ |

### 2.2 ç°æœ‰è§£å†³æ–¹æ¡ˆçš„ä¸è¶³

| åº“ | é—®é¢˜ |
|---|---|
| `thiserror` | åªèƒ½å®šä¹‰é”™è¯¯ç±»å‹ï¼Œä¸ç®¡ç†é”™è¯¯ç  |
| `anyhow` | é€šç”¨é”™è¯¯å¤„ç†ï¼Œæ— ä¸šåŠ¡è¯­ä¹‰ |
| `strum` | æšä¸¾å¢å¼ºï¼Œä½†ä¸é’ˆå¯¹é”™è¯¯ç  |
| `error-code` | åŠŸèƒ½æœ‰é™ï¼Œä¸æ”¯æŒé…ç½®æ–‡ä»¶ |

**ç»“è®ºï¼šéœ€è¦ä¸€ä¸ªä¸“é—¨ä¸ºä¸šåŠ¡é”™è¯¯ç è®¾è®¡çš„æ¡†æ¶ï¼**

---

## 3. è§£å†³æ–¹æ¡ˆ

### 3.1 è®¾è®¡ç†å¿µ

```
é…ç½®é©±åŠ¨å¼€å‘ (Configuration-Driven Development)
```

**æ ¸å¿ƒç†å¿µï¼š**
1. **é…ç½®å³ä»£ç **ï¼šé”™è¯¯ç å®šä¹‰åœ¨ YAML é…ç½®æ–‡ä»¶ä¸­
2. **è‡ªåŠ¨ç”Ÿæˆ**ï¼šç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆç±»å‹å®‰å…¨çš„æšä¸¾ä»£ç 
3. **é›¶è¿è¡Œæ—¶å¼€é”€**ï¼šæ‰€æœ‰é€»è¾‘åœ¨ç¼–è¯‘æ—¶å®Œæˆ
4. **IDE å‹å¥½**ï¼šç”Ÿæˆçš„ä»£ç å¯ä»¥è¢« IDE ç´¢å¼•å’Œè‡ªåŠ¨è¡¥å…¨

### 3.2 ä¸‰å±‚æ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   YAML é…ç½®å±‚                           â”‚
â”‚            biz_errors.yaml (ç”¨æˆ·ç»´æŠ¤)                   â”‚
â”‚  - é”™è¯¯ç å®šä¹‰                                            â”‚
â”‚  - å¤šè¯­è¨€æ¶ˆæ¯                                            â”‚
â”‚  - HTTP çŠ¶æ€ç æ˜ å°„                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ ç¼–è¯‘æ—¶ä»£ç ç”Ÿæˆï¼ˆè¿‡ç¨‹å®ï¼‰
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä»£ç ç”Ÿæˆå±‚ (#[generate_error_codes])          â”‚
â”‚         - è¿‡ç¨‹å®è‡ªåŠ¨è¯»å– YAML                            â”‚
â”‚         - è§£æ YAML é…ç½®                                â”‚
â”‚         - ç”Ÿæˆ ErrorCode æšä¸¾                            â”‚
â”‚         - ç”Ÿæˆ code(), msg() ç­‰æ–¹æ³•                      â”‚
â”‚         - âœ… æ— éœ€ build.rsï¼Œé›¶é…ç½®                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä¸šåŠ¡é€»è¾‘å±‚ (ç”¨æˆ·ä»£ç )                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ErrorCode (è‡ªåŠ¨ç”Ÿæˆçš„æšä¸¾)                     â”‚   â”‚
â”‚  â”‚  - InvalidParam, NotFound, DatabaseError ...   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â†‘                                  â”‚
â”‚                       â”‚ ç»„åˆ/ç»§æ‰¿                         â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚          â”‚            â”‚            â”‚                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”              â”‚
â”‚    â”‚  UserError â”‚ â”‚OrderErrâ”‚ â”‚Payment â”‚              â”‚
â”‚    â”‚  (AppError)â”‚ â”‚  (App  â”‚ â”‚ Error  â”‚              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ”¹è¿›ï¼š**
- âœ… **è¿‡ç¨‹å®è‡ªåŠ¨ç”Ÿæˆ**ï¼šä¸€ä¸ªå±æ€§å® `#[generate_error_codes]` å®Œæˆæ‰€æœ‰ä»£ç ç”Ÿæˆ
- âœ… **æ— éœ€ build.rs**ï¼šç®€åŒ–é¡¹ç›®é…ç½®ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
- âœ… **ç±»å‹å®‰å…¨**ï¼šIDE å®Œæ•´æ”¯æŒï¼Œè‡ªåŠ¨è¡¥å…¨
- âœ… **é›¶è¿è¡Œæ—¶å¼€é”€**ï¼šæ‰€æœ‰ä»£ç åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆ

---

## 4. æ¶æ„è®¾è®¡

### 4.1 æ•´ä½“æ¶æ„å›¾

```text
                    biz-error æ¡†æ¶

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·è§†è§’                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  1. é…ç½®é”™è¯¯ç  (biz_errors.yaml)                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ invalid_param:                   â”‚                   â”‚
â”‚     â”‚   code: 4000                     â”‚                   â”‚
â”‚     â”‚   message:                       â”‚                   â”‚
â”‚     â”‚     en: "INVALID PARAMETER"      â”‚                   â”‚
â”‚     â”‚     zh-CN: "å‚æ•°æ— æ•ˆ"            â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                               â”‚
â”‚  2. ä½¿ç”¨è¿‡ç¨‹å® (æ¨èæ–¹å¼)                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ #[generate_error_codes(          â”‚                   â”‚
â”‚     â”‚   "biz_errors.yaml")]            â”‚                   â”‚
â”‚     â”‚ mod error_codes {}               â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                               â”‚
â”‚  3. ä½¿ç”¨ç”Ÿæˆçš„ API                                            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚     â”‚ let error = AppError::new(       â”‚                   â”‚
â”‚     â”‚     ErrorCode::InvalidParam       â”‚                   â”‚
â”‚     â”‚ )                               â”‚                   â”‚
â”‚     â”‚ .with_msg("ç”¨æˆ·IDä¸èƒ½ä¸ºç©º")      â”‚                   â”‚
â”‚     â”‚ .with_data(json!({...}));        â”‚                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                       â–²

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ¡†æ¶å†…éƒ¨                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ è¿‡ç¨‹å®          â”‚ â”€â”€â”€> â”‚ error_codes      â”‚ (è‡ªåŠ¨ç”Ÿæˆ) â”‚
â”‚  â”‚ #[generate_...] â”‚      â”‚ (æ¨¡å—)           â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚                                                   â”‚
â”‚         â”‚ è¯»å– YAML                                          â”‚
â”‚         â”‚ ç”Ÿæˆæšä¸¾                                            â”‚
â”‚         â”‚ ç”Ÿæˆæ–¹æ³•                                            â”‚
â”‚         â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  ErrorCode æšä¸¾ (è‡ªåŠ¨ç”Ÿæˆ)               â”‚              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚  â”‚  â”‚ InvalidParam,                   â”‚   â”‚              â”‚
â”‚  â”‚  â”‚ NotFound,                       â”‚   â”‚              â”‚
â”‚  â”‚  â”‚ DatabaseError, ...              â”‚   â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚  â”‚                                        â”‚              â”‚
â”‚  â”‚  impl ErrorCode {                     â”‚              â”‚
â”‚  â”‚      fn code() -> i32                 â”‚              â”‚
â”‚  â”‚      fn message() -> &'static str      â”‚              â”‚
â”‚  â”‚      fn message_lang(lang) -> &'staticâ”‚              â”‚
â”‚  â”‚      fn http_status() -> StatusCode    â”‚              â”‚
â”‚  â”‚  }                                    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  AppError<E: ErrorCode> åŸºç±»             â”‚              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚
â”‚  â”‚  â”‚ struct AppError<E> {            â”‚   â”‚              â”‚
â”‚  â”‚  â”‚     error_code: E,              â”‚   â”‚              â”‚
â”‚  â”‚  â”‚     custom_msg: Option<String>, â”‚   â”‚              â”‚
â”‚  â”‚  â”‚     data: Option<Value>,        â”‚   â”‚              â”‚
â”‚  â”‚  â”‚ }                               â”‚   â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚
â”‚  â”‚                                       â”‚              â”‚
â”‚  â”‚  Builder æ¨¡å¼:                        â”‚              â”‚
â”‚  â”‚  - .with_msg()                        â”‚              â”‚
â”‚  â”‚  - .with_data()                       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Axum é›†æˆ                              â”‚              â”‚
â”‚  â”‚  impl IntoResponse for AppError<E>     â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¶æ„äº®ç‚¹ï¼š**
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**ï¼šä¸»åº“ + è¿‡ç¨‹å®å­ crate
- ğŸ”„ **ä¸¤ç§æ–¹å¼**ï¼šè¿‡ç¨‹å®ï¼ˆæ¨èï¼‰+ build.rsï¼ˆä¼ ç»Ÿï¼‰
- ğŸ¯ **æ³›å‹è®¾è®¡**ï¼š`AppError<E: ErrorCode>` é€‚é…æ‰€æœ‰é¡¹ç›®
- ğŸ”Œ **æ¡†æ¶é›†æˆ**ï¼šå¼€ç®±å³ç”¨çš„ Axum æ”¯æŒ

### 4.2 æ•°æ®æµå›¾

```text
ç”¨æˆ·å¼€å‘æµç¨‹ï¼ˆè¿‡ç¨‹å®æ–¹å¼ - æ¨èï¼‰ï¼š

1. ç¼–è¾‘ biz_errors.yaml
        â”‚
        â–¼
2. æ·»åŠ è¿‡ç¨‹å®åˆ°ä»£ç 
        â”‚
        â”œâ”€> #[generate_error_codes("biz_errors.yaml")]
        â”‚       mod error_codes {}
        â”‚
        â–¼
3. è¿è¡Œ cargo build
        â”‚
        â”œâ”€â†’ è¿‡ç¨‹å®è‡ªåŠ¨æ‰§è¡Œï¼ˆç¼–è¯‘æ—¶ï¼‰
        â”‚       â”‚
        â”‚       â”œâ”€â†’ è¯»å– biz_errors.yaml
        â”‚       â”‚       â”‚
        â”‚       â”‚       â–¼
        â”‚       â”‚   è§£æ YAML â†’ serde_yaml::Value
        â”‚       â”‚       â”‚
        â”‚       â”‚       â–¼
        â”‚       â”‚   ç”Ÿæˆ Rust ä»£ç  â†’ TokenStream
        â”‚       â”‚       â”‚
        â”‚       â”‚       â”œâ”€ ErrorCode æšä¸¾
        â”‚       â”‚       â”œâ”€ code() æ–¹æ³•
        â”‚       â”‚       â”œâ”€ message() æ–¹æ³•
        â”‚       â”‚       â”œâ”€ message_lang() æ–¹æ³•
        â”‚       â”‚       â””â”€ http_status() æ–¹æ³•
        â”‚       â”‚
        â”‚       â””â”€â†’ æ›¿æ¢ mod error_codes {}
        â”‚
        â””â”€â†’ rustc ç¼–è¯‘æ•´ä¸ªé¡¹ç›®
                â”‚
                â–¼
        ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ / åº“æ–‡ä»¶


ä¼ ç»Ÿæ–¹å¼ï¼ˆbuild.rsï¼‰ï¼š

1. ç¼–è¾‘ biz_errors.yaml
        â”‚
        â–¼
2. è¿è¡Œ cargo build
        â”‚
        â”œâ”€â†’ build.rs è¯»å– biz_errors.yaml
        â”‚       â”‚
        â”‚       â–¼
        â”‚   è§£æ YAML â†’ ç”Ÿæˆä»£ç  â†’ å†™å…¥ error_codes.rs
        â”‚
        â””â”€â†’ rustc ç¼–è¯‘æ•´ä¸ªé¡¹ç›®
                â”‚
                â–¼
        ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ / åº“æ–‡ä»¶


è¿è¡Œæ—¶æµç¨‹ï¼ˆä¸¤ç§æ–¹å¼ç›¸åŒï¼‰ï¼š

Handler è¿”å› Result<T, AppError<E>>
        â”‚
        â”œâ”€â†’ Ok(T) â†’ æ­£å¸¸å“åº”
        â”‚
        â””â”€â†’ Err(AppError<E>)
                â”‚
                â”œâ”€â†’ IntoResponse trait
                â”‚       â”‚
                â”‚       â–¼
                â”‚   ErrorResponse {
                â”‚       code: i32,
                â”‚       msg: String,
                â”‚       data: Option<Value>
                â”‚   }
                â”‚
                â””â”€â†’ HTTP Response + JSON Body
```

### 4.3 ç±»å‹å±‚æ¬¡å›¾

```text
                    ErrorCode (trait)
                         â”‚
                         â”‚ code() â†’ i32
                         â”‚ message() â†’ &'static str
                         â”‚ message_lang(lang) â†’ &'static str
                         â”‚ http_status() â†’ StatusCode
                         â”‚
                         â–¼ å®ç°æ­¤ trait
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  é¡¹ç›®çš„æšä¸¾   â”‚
                  â”‚ErrorCode Enum â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ AppError<E>   â”‚ (æ³›å‹åŸºç±»)
                  â”‚  where        â”‚
                  â”‚  E: ErrorCode â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ - error_code â”‚ E
                  â”‚ - custom_msg â”‚ Option<String>
                  â”‚ - data       â”‚ Option<Value>
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚UserErrorâ”‚    â”‚OrderErrorâ”‚   â”‚PaymentErrâ”‚  â”‚Product â”‚
    â”‚AppError<â”‚    â”‚AppError< â”‚   â”‚AppError< â”‚  â”‚AppErrorâ”‚
    â”‚ProjectECâ”‚    â”‚ProjectEC â”‚   â”‚ProjectEC â”‚  â”‚ProjectECâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚             â”‚
         â”‚ not_found()   â”‚ cancel()      â”‚ declined()  â”‚
         â”‚ already_exists()â”‚ timeout()   â”‚ timeout()   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


æ³›å‹è®¾è®¡ä¼˜åŠ¿ï¼š

âœ… ç±»å‹å®‰å…¨ - æ¯ä¸ªé¡¹ç›®æœ‰è‡ªå·±çš„ ErrorCode æšä¸¾
âœ… ä»£ç å¤ç”¨ - ä¸€ä¸ª AppError é€‚é…æ‰€æœ‰åœºæ™¯
âœ… çµæ´»ç»„åˆ - å¯ä»¥å®šä¹‰ç‰¹å®šé¢†åŸŸçš„é”™è¯¯ç±»å‹
âœ… é›¶æˆæœ¬æŠ½è±¡ - ç¼–è¯‘æ—¶å•æ€åŒ–ï¼Œæ— è¿è¡Œæ—¶å¼€é”€


ç»„åˆæ¨¡å¼å®ç°ï¼ˆNewtype æ¨¡å¼ï¼‰ï¼š

pub struct UserError(AppError<ProjectErrorCode>);

impl UserError {
    pub fn not_found(id: u64) -> Self {
        Self(AppError::new(ErrorCode::NotFound)
            .with_msg(format!("ç”¨æˆ· {} ä¸å­˜åœ¨", id))
            .with_data(json!({"user_id": id})))
    }
}
```

---

## 5. æŠ€æœ¯å®ç°

### 5.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Rust | 2024 edition | ç¼–ç¨‹è¯­è¨€ |
| serde | 1.0.228 | åºåˆ—åŒ–/ååºåˆ—åŒ– |
| serde_yaml | 0.9.34 | YAML é…ç½®è§£æ |
| axum | 0.8.8 | Web æ¡†æ¶é›†æˆ |
| anyhow | 1.0.100 | å¯é€‰çš„é€šç”¨é”™è¯¯æ”¯æŒ |

### 5.2 ä»£ç ç”Ÿæˆå®ç°

#### 5.2.1 è¿‡ç¨‹å®æ–¹å¼ï¼ˆæ¨èï¼‰

```rust
#[proc_macro_attribute]
pub fn generate_error_codes(args: TokenStream, input: TokenStream) -> TokenStream {
    // 1. è§£æå±æ€§å‚æ•°ï¼ˆYAML æ–‡ä»¶è·¯å¾„ï¼‰
    let yaml_path = syn::parse::<LitStr>(args)?.value();

    // 2. è¯»å– YAML æ–‡ä»¶
    let yaml_content = std::fs::read_to_string(&yaml_path)?;

    // 3. è§£æ YAML
    let config: serde_yaml::Value = serde_yaml::from_str(&yaml_content)?;

    // 4. ç”Ÿæˆ Rust ä»£ç ï¼ˆTokenStreamï¼‰
    let code = generate_error_codes_impl(&config)?;

    // 5. è¿”å›ç”Ÿæˆçš„ä»£ç ï¼ˆæ›¿æ¢ mod error_codes {}ï¼‰
    code.into()
}

fn generate_error_codes_impl(config: &serde_yaml::Value) -> Result<TokenStream> {
    // éå†æ‰€æœ‰é”™è¯¯å®šä¹‰
    for (name, value) in config["errors"].as_mapping() {
        let code = value["code"].as_i64() as i32;
        let http_status = value["http_status"].as_i64() as u16;
        let messages = value["message"].as_mapping();

        // ç”Ÿæˆæšä¸¾å˜ä½“
        // ç”Ÿæˆ code() æ–¹æ³•åˆ†æ”¯
        // ç”Ÿæˆ message() æ–¹æ³•åˆ†æ”¯ï¼ˆå¤šè¯­è¨€ï¼‰
        // ç”Ÿæˆ http_status() æ–¹æ³•åˆ†æ”¯
    }

    Ok(quote! {
        mod error_codes {
            use ::biz_error::ErrorCode as ErrorCodeTrait;

            #[derive(Debug, Clone, Copy)]
            pub enum ErrorCode {
                InvalidParam,
                UserNotFound,
                DatabaseError,
            }

            impl ::biz_error::ErrorCode for ErrorCode {
                fn code(&self) -> i32 { ... }
                fn message(&self) -> &'static str { ... }
                fn message_lang(&self, lang: &str) -> &'static str { ... }
                fn http_status(&self) -> StatusCode { ... }
            }
        }
    })
}
```

#### 5.2.2 ä¼ ç»Ÿ build.rs æ–¹å¼ï¼ˆå¯é€‰ï¼‰

```rust
fn main() {
    // 1. ç›‘å¬é…ç½®æ–‡ä»¶å˜åŒ–
    println!("cargo:rerun-if-changed=biz_errors.yaml");

    // 2. è¯»å– YAML é…ç½®
    let yaml_content = std::fs::read_to_string("biz_errors.yaml")?;

    // 3. è§£æ YAML
    let config: serde_yaml::Value = serde_yaml::from_str(&yaml_content)?;

    // 4. ç”Ÿæˆ Rust ä»£ç 
    let generated_code = generate_from_config(&config)?;

    // 5. å†™å…¥æ–‡ä»¶
    std::fs::write("src/error_codes.rs", generated_code)?;
}
```

### 5.3 å…³é”®è®¾è®¡æ¨¡å¼

#### 5.3.1 Builder æ¨¡å¼

```rust
let error = AppError::new(ErrorCode::InvalidParam)  // åˆ›å»º
    .with_msg("ç”¨æˆ·IDä¸èƒ½ä¸ºç©º")                       // é“¾å¼è°ƒç”¨
    .with_data(json!({"field": "user_id"}));         // é“¾å¼è°ƒç”¨
```

#### 5.3.2 Newtype æ¨¡å¼ï¼ˆç»„åˆï¼‰

```rust
pub struct UserError(AppError);  // æ–°ç±»å‹ï¼Œé›¶å¼€é”€æŠ½è±¡

impl UserError {
    pub fn not_found(id: u64) -> Self {
        Self(AppError::new(ErrorCode::NotFound)
            .with_msg(format!("ç”¨æˆ· {} ä¸å­˜åœ¨", id))
            .with_data(json!({"user_id": id})))
    }
}
```

#### 5.3.3 Trait æ¨¡å¼

```rust
impl IntoResponse for AppError {  // Axum é›†æˆ
    fn into_response(self) -> Response {
        let status = self.error_code.http_status();
        let resp = self.to_response();
        (status, Json(resp)).into_response()
    }
}
```

---

## 6. ä½¿ç”¨åœºæ™¯

### 6.1 åœºæ™¯ä¸€ï¼šWeb API é”™è¯¯å¤„ç†

```rust
use axum::{Json, Router};
use serde::Deserialize;

#[derive(Deserialize)]
struct CreateUserRequest {
    name: String,
    email: String,
}

pub async fn create_user(
    Json(payload): Json<CreateUserRequest>,
) -> Result<Json<User>, UserError> {
    // éªŒè¯é‚®ç®±æ ¼å¼
    if !payload.email.contains('@') {
        return Err(UserError::invalid_email(&payload.email));
    }

    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨
    if db::find_user_by_email(&payload.email).await.is_some() {
        return Err(UserError::already_exists(&payload.email));
    }

    // åˆ›å»ºç”¨æˆ·
    let user = db::create_user(payload).await
        .map_err(|e| UserError::database_error(&e.to_string()))?;

    Ok(Json(user))
}
```

**è¿”å›çš„ JSON å“åº”ï¼š**

```json
{
  "code": 10016,
  "msg": "ç”¨æˆ·å·²å­˜åœ¨",
  "data": {
    "email": "test@example.com"
  }
}
```

### 6.2 åœºæ™¯äºŒï¼šå¾®æœåŠ¡é”™è¯¯ä¼ æ’­

```rust
// è®¢å•æœåŠ¡
pub async fn create_order(
    user_id: u64,
    product_id: u64,
) -> Result<Order, OrderError> {
    // è°ƒç”¨ç”¨æˆ·æœåŠ¡
    let user = user_client::get_user(user_id).await
        .map_err(|e| OrderError::user_service_error(e.to_string()))?;

    // è°ƒç”¨åº“å­˜æœåŠ¡
    let product = inventory_client::check_stock(product_id).await
        .map_err(|e| OrderError::inventory_error(e.to_string()))?;

    Ok(Order { ... })
}
```

### 6.3 åœºæ™¯ä¸‰ï¼šå¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯

```rust
// æ ¹æ®è¯·æ±‚å¤´ Accept-Language è¿”å›å¯¹åº”è¯­è¨€
pub async fn get_user_handler(
    Path(id): Path<u64>,
    headers: headers::AcceptLanguage,
) -> Result<Json<User>, AppError> {
    let user = db::find_user(id).await
        .ok_or_else(|| AppError::new(ErrorCode::NotFound)
            .with_msg_lang(&headers.lang, format!("ç”¨æˆ· {} ä¸å­˜åœ¨", id))
        )?;

    Ok(Json(user))
}
```

**ä¸åŒè¯­è¨€çš„å“åº”ï¼š**

```json
// Accept-Language: en
{
  "code": 4204,
  "msg": "RESOURCE NOT FOUND"
}

// Accept-Language: zh-CN
{
  "code": 4204,
  "msg": "èµ„æºä¸å­˜åœ¨"
}
```

---

## 7. å¯¹æ¯”åˆ†æ

### 7.1 ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | biz-error | thiserror | anyhow | æ‰‹åŠ¨å®ç° |
|------|-----------|----------|--------|----------|
| é”™è¯¯ç ç®¡ç† | âœ… YAML é…ç½® | âŒ æ‰‹åŠ¨å®šä¹‰ | âŒ æ—  | âœ… ä½†ç¹ç |
| ä»£ç ç”Ÿæˆ | âœ… è¿‡ç¨‹å®è‡ªåŠ¨ | âŒ æ‰‹åŠ¨ç¼–å†™ | âŒ æ—  | âŒ æ‰‹åŠ¨ç»´æŠ¤ |
| ç±»å‹å®‰å…¨ | âœ… æšä¸¾ + æ³›å‹ | âœ… æšä¸¾/ç»“æ„ä½“ | âŒ åŠ¨æ€ | âœ… æ‰‹åŠ¨ç»´æŠ¤ |
| å›½é™…åŒ– | âœ… å†…ç½® | âŒ éœ€è‡ªå·±å®ç° | âŒ æ—  | âŒ éœ€è‡ªå·±å®ç° |
| è‡ªåŠ¨è¡¥å…¨ | âœ… IDE å®Œæ•´æ”¯æŒ | âœ… IDE æ”¯æŒ | âŒ æ—  | âœ… ä½†é‡å¤ |
| é”™è¯¯å±‚æ¬¡ | âœ… æ³›å‹ + ç»„åˆ | âœ… æšä¸¾ | âŒ æ—  | âœ… æ‰‹åŠ¨ç»´æŠ¤ |
| é…ç½®é©±åŠ¨ | âœ… YAML + è¿‡ç¨‹å® | âŒ ä»£ç  | âŒ æ—  | âŒ ä»£ç  |
| é›¶ build.rs | âœ… è¿‡ç¨‹å®æ–¹å¼ | N/A | N/A | N/A |
| å­¦ä¹ æˆæœ¬ | ä½ | ä¸­ | ä½ | é«˜ |

### 7.2 ä¼˜åŠ¿æ€»ç»“

1. **å¼€å‘æ•ˆç‡**
   - é…ç½®æ–‡ä»¶ç®¡ç†ï¼Œä¸€æ¬¡å®šä¹‰ï¼Œå¤„å¤„ä½¿ç”¨
   - è¿‡ç¨‹å®è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€ build.rs
   - IDE å‹å¥½ï¼Œè‡ªåŠ¨è¡¥å…¨ï¼Œå‡å°‘é”™è¯¯

2. **å¯ç»´æŠ¤æ€§**
   - é”™è¯¯ç é›†ä¸­ç®¡ç†ï¼Œä¿®æ”¹é…ç½®å³å¯
   - æ·»åŠ æ–°è¯­è¨€åªéœ€æ›´æ–° YAML
   - ä»£ç ç”Ÿæˆç¡®ä¿ä¸€è‡´æ€§

3. **æ‰©å±•æ€§**
   - é€šè¿‡ç»„åˆæ¨¡å¼å®šä¹‰ä¸šåŠ¡é”™è¯¯ç±»å‹
   - æ³›å‹è®¾è®¡é€‚é…æ‰€æœ‰é¡¹ç›®
   - æ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯å’Œæ•°æ®
   - å¯ä¸ç°æœ‰æ¡†æ¶æ— ç¼é›†æˆ

4. **æ€§èƒ½**
   - ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
   - ç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥
   - æ— åå°„æˆ–åŠ¨æ€æŸ¥æ‰¾
   - æ³›å‹å•æ€åŒ–ä¼˜åŒ–

5. **ç”¨æˆ·ä½“éªŒ**
   - **è¿‡ç¨‹å®æ–¹å¼**ï¼šä¸€ä¸ªå±æ€§å®æå®šï¼Œé›¶é…ç½®
   - **ä¼ ç»Ÿæ–¹å¼**ï¼šæ”¯æŒ build.rsï¼Œå‘åå…¼å®¹
   - ä¸¤ç§æ–¹å¼å¯é€‰ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚

---

## 8. æœªæ¥è§„åˆ’

### 8.1 å·²å®ŒæˆåŠŸèƒ½ âœ…

- [x] **v0.1** - åŸºç¡€åŠŸèƒ½
  - [x] ErrorCode trait å®šä¹‰
  - [x] AppError æ³›å‹åŸºç±»
  - [x] YAML é…ç½®æ–‡ä»¶æ”¯æŒ
  - [x] å¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯
  - [x] HTTP çŠ¶æ€ç æ˜ å°„
  - [x] Axum æ¡†æ¶é›†æˆ

- [x] **v0.1** - ä»£ç ç”Ÿæˆ
  - [x] build.rs ä¼ ç»Ÿæ–¹å¼
  - [x] **è¿‡ç¨‹å®è‡ªåŠ¨ç”Ÿæˆ** â­ æ–°å¢
  - [x] é›¶è¿è¡Œæ—¶å¼€é”€

### 8.2 çŸ­æœŸè®¡åˆ’ (v0.2)

- [ ] æ”¯æŒä»ç¯å¢ƒå˜é‡è¯»å–é»˜è®¤è¯­è¨€
- [ ] æä¾›è¿ç§»å·¥å…·ï¼ˆä» thiserror è¿ç§»ï¼‰
- [ ] æ·»åŠ æ›´å¤šä¾¿æ·å®
- [ ] æ”¯æŒè‡ªå®šä¹‰é”™è¯¯å“åº”æ ¼å¼

### 8.3 ä¸­æœŸè®¡åˆ’ (v0.3)

- [ ] æ”¯æŒä»æ•°æ®åº“åŠ è½½é”™è¯¯æ¶ˆæ¯
- [ ] æä¾›é”™è¯¯ç æ–‡æ¡£ç”Ÿæˆå·¥å…·
- [ ] æ”¯æŒé”™è¯¯ç åˆ†ç»„/å‘½åç©ºé—´
- [ ] æä¾›é”™è¯¯ç ç»Ÿè®¡å’Œåˆ†æå·¥å…·

### 8.4 é•¿æœŸè®¡åˆ’ (v1.0)

- [ ] æ”¯æŒ WebAssembly
- [ ] æä¾›ç®¡ç†ç•Œé¢ï¼ˆé”™è¯¯ç ç®¡ç†åå°ï¼‰
- [ ] æ”¯æŒå¤šç§é…ç½®æ ¼å¼ï¼ˆJSONã€TOMLï¼‰
- [ ] é›†æˆä¸»æµ Web æ¡†æ¶ï¼ˆActixã€Rocketï¼‰

---

## 9. æ€»ç»“

`biz-error` æ—¨åœ¨è§£å†³ Rust ä¸šåŠ¡ç³»ç»Ÿå¼€å‘ä¸­çš„é”™è¯¯ç ç®¡ç†éš¾é¢˜ï¼Œé€šè¿‡**é…ç½®é©±åŠ¨ + è¿‡ç¨‹å®**çš„æ–¹å¼ï¼Œæä¾›ç±»å‹å®‰å…¨ã€æ˜“äºç»´æŠ¤ã€ç¬¦åˆ Rust æœ€ä½³å®è·µçš„é”™è¯¯å¤„ç†æ–¹æ¡ˆï¼ŒåŒæ—¶ä¿æŒ Rust çš„ç±»å‹å®‰å…¨å’Œé›¶æˆæœ¬æŠ½è±¡ã€‚

**æ ¸å¿ƒä»·å€¼ï¼š**
- ğŸ“ **é…ç½®é©±åŠ¨**ï¼šYAML é…ç½®ï¼Œè‡ªåŠ¨ç”Ÿæˆ
- ğŸš€ **è¿‡ç¨‹å®**ï¼šæ— éœ€ build.rsï¼Œä¸€ä¸ªå±æ€§å®æå®š
- ğŸŒ **å›½é™…åŒ–**ï¼šå†…ç½®å¤šè¯­è¨€æ”¯æŒ
- ğŸ¯ **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ï¼ŒIDE å‹å¥½
- ğŸ”Œ **æ˜“äºé›†æˆ**ï¼šå¼€ç®±å³ç”¨çš„ Axum é›†æˆ
- âš¡ **é›¶æˆæœ¬**ï¼šç¼–è¯‘æ—¶ç”Ÿæˆï¼Œæ— è¿è¡Œæ—¶å¼€é”€

**ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š**
1. **è¿‡ç¨‹å®æ–¹å¼ï¼ˆæ¨èï¼‰**ï¼š`#[generate_error_codes("biz_errors.yaml")]` - é›¶é…ç½®ï¼Œæœ€ç®€æ´
2. **build.rs æ–¹å¼ï¼ˆä¼ ç»Ÿï¼‰**ï¼šæ”¯æŒå‘åå…¼å®¹ï¼Œæ»¡è¶³ä¸åŒéœ€æ±‚

è®© Rust é”™è¯¯å¤„ç†æ›´ä¼˜é›…ï¼âš¡
